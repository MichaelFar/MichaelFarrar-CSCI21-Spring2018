#include <iostream>
#include <fstream>
#include <cstdlib>
#include <time.h>
#include <math.h>
#include <vector>
#include <sstream>
using namespace std;


int makeRandomCreditcard() {
    ifstream fin;
    ofstream fout;
    fout.open("CreditCardNumbers");
    srand(time(NULL));
    int V = 0;
    int seed = 0;
    int number = 0;
    const int master = 16;
    const int discover = 16;
    const int american = 15;
    seed = rand() % 100000;
    V = (rand() % 4) + 13;
    
    srand(seed);
    vector<long int>AMERICANamountOfNumbers(american);
    vector<long int>DISCOVERamountOfNumbers(discover);
    vector<long int>MasterCardamountOfNumbers(master);
    vector<long int>VisaAmountOfNumbers(V);
    
    
    number = rand() % 10;
    
    for (int i = 0; i < american; i++)
    {
        seed = rand() % 100000;
        srand(AMERICANamountOfNumbers.at(i) + number + seed);
        number = rand() % 9;
        AMERICANamountOfNumbers.at(i) = number;
        fout << AMERICANamountOfNumbers.at(i);
                

    }
    fout << endl << endl;
    cout << endl << endl;
    for (int i = 0; i < discover; i++)
    {
        seed = rand() % 100000;
        srand(DISCOVERamountOfNumbers.at(i) + number + seed);
        number = rand() % 9;
        DISCOVERamountOfNumbers.at(i) = number;
        fout << DISCOVERamountOfNumbers.at(i);
        
    }
    fout << endl << endl;
        cout << endl << endl;

    for (int i = 0; i < master; i++)
    {
        seed = rand() % 100000;
        srand(MasterCardamountOfNumbers.at(i) + number + seed);
        number = rand() % 9;
        MasterCardamountOfNumbers.at(i) = number;
        fout << MasterCardamountOfNumbers.at(i);
        
    }
    fout << endl << endl;
        cout << endl << endl;
    for (int i = 0; i < V; i++)
    {
        seed = rand() % 100000;
        srand(VisaAmountOfNumbers.at(i) + number + seed);
        number = rand() % 9;
        VisaAmountOfNumbers.at(i) = number;
        fout << VisaAmountOfNumbers.at(i);
        
    }
    
}
int CheckBIN(long int american, long int master, long int discover, long int visa)
{
    stringstream americanSS;
    stringstream masterSS;
    stringstream discoverSS;
    stringstream visaSS;
    ifstream fin;
    fin.open("CreditCardNumbers");
    fin >> american;
    fin >> master;
    fin >> discover;
    fin >> visa;
    cout << endl;
    cout << "Card: " << american << endl;
    long int visaDynamicLength = 0;
    if (american >=340000000000000 && american <= 349999999999999)
    {
        americanSS << american - 340000000000000;
    }
    else if (american >= 370000000000000 && american <= 379999999999999)
    {
        americanSS << american - 370000000000000;
    }
    string americanStr = americanSS.str();
    
    if (americanStr.length() == 13)
    {
        cout << " is a American Express Card" << endl;
    }
    else
    {
        cout << " is an unknown card" << endl;
    }
    cout << "Card: " << discover << endl;
    if (discover >=601100000000000 && discover <= 601199999999999)
    {
        cout << " is a Discover Card" << endl;  
    }
    else if (discover >= 622126000000000 && discover <= 622925999999999)
    {
        
        cout << " is a Discover Card" << endl;
    }
    
    else if (discover >= 644000000000000 && discover <= 649999999999999)
    {
        cout << " is a Discover Card" << endl;
        
    }
    else if (discover >= 650000000000000 && discover <= 659999999999999)
    {
        cout << " is a Discover Card" << endl;
    }
    else
    {
        cout << " is an unknown card" << endl;
    }
    cout << "Card: " << master << endl;
    if (master >=510000000000000 && master <= 559999999999999)
    {
        cout << " is a Master Card" << endl;
    }
    else
    {
        cout << " is an unknown card" << endl;
    }
    cout << "Card: " << visa << endl;
    visaSS >> visa;
    string visaStr = visaSS.str();
    if (visa >= 4000000000000 && visa <= 4999999999999 || visa >= 40000000000000 && visa <= 49999999999999 || visa >= 400000000000000 && visa <= 499999999999999)
    {
        cout << " is a Visa Card" << endl;
    }
    else
    {
        cout << " is an unknown card" << endl;
    }
    
    
    
    
}
int main() {
    ifstream fin;
    ofstream fout;
    
    long int american = 0;
    long int master = 0;
    long int discover = 0;
    long int visa = 0;
    makeRandomCreditcard();//Note: Erase this line to put custom inputs into the Credit Card Numbers File
    CheckBIN(0, 0, 0, 0);
    
}


    